<div class="breadcrumbs" (click)="$event.stopPropagation()" (mousedown)="$event.preventDefault()">
    <span class="crumb" (click)="onBreadcrumbClick($event)">state</span>
    @for (part of currentPath(); track $index) {
        <span class="separator">/</span>
        <span class="crumb" (click)="onBreadcrumbClick($event)">{{ part }}</span>
    }
</div>
<ul class="autocomplete-list" (mouseleave)="onMouseLeave()" (click)="$event.stopPropagation()" (mousedown)="$event.preventDefault()">
    @for (item of filteredItems(); track item.key) {
        <li 
            [class.active]="item === activeItem()"
            (mousedown)="selectItem(item); $event.preventDefault(); $event.stopPropagation()"
            (mouseenter)="onMouseEnter(item)"
        >
            <div class="item-content">
                <span class="item-key">{{ item.key }}</span>
            </div>
            
            <span class="item-type">{{ typeof(item.value) }}</span>

            @if (item.type === 'group') {
                <span class="item-icon" (mousedown)="onArrowClick($event, item); $event.preventDefault(); $event.stopPropagation()">
                    <i class="ti ti-arrow-right"></i>
                </span>
            }
        </li>
    }
    @if (filteredItems().length === 0) {
        <li class="no-results">No matching variables</li>
    }
</ul>

@if (hoveredItem(); as item) {
    <div class="tooltip-wrapper" [style.top.px]="0">
        <app-value-preview-tooltip [value]="item.value"></app-value-preview-tooltip>
    </div>
}


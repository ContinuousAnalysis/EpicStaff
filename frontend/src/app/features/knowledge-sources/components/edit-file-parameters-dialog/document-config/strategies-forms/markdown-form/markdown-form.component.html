<form [formGroup]="strategyForm">
    <div class="config__grid config__grid--pt-0" formGroupName="mainParams">
        <div class="config__grid-item">
            <label>Chunk Size</label>
            <mat-icon
                class="config__tooltip"
                matTooltip="The maximum size of each document chunk. Smaller chunks are more precise but may lose context. Larger chunks preserve more context but may be less precise."
                matTooltipPosition="above"
                matTooltipClass="dialog__label-tooltip"
            >
                help_outline
            </mat-icon>
        </div>
        <div class="config__grid-item config__grid-item--short">
            <app-input-number
                formControlName="chunk_size"
                [alwaysShowSteps]="true"
                [invalid]="!!getMainParamControl('chunk_size')?.invalid"
            />
            <app-validation-errors [control]="getMainParamControl('chunk_size')!"/>
        </div>

        <div class="config__grid-item">
            <label>Chunk Overlap</label>
            <mat-icon
                class="config__tooltip"
                matTooltip="The number of characters or tokens that overlap between chunks. Helps maintain context between chunks. Must be smaller than chunk size. "
                matTooltipPosition="above"
                matTooltipClass="dialog__label-tooltip"
            >
                help_outline
            </mat-icon>
        </div>
        <div class="config__grid-item config__grid-item--short">
            <app-input-number
                formControlName="chunk_overlap"
                [alwaysShowSteps]="true"
                [invalid]="!!getMainParamControl('chunk_overlap')?.invalid"
            />
            <app-validation-errors [control]="getMainParamControl('chunk_overlap')!"/>
        </div>
    </div>

    <span class="config__divider"></span>

    <div class="config__grid" formGroupName="additionalParams">
        <span class="config__grid-item">Additional parameters</span>
        <span class="config__grid-item"></span>

        <div class="config__grid-item">
            <label>Headers to Split On</label>
            <mat-icon
                class="config__tooltip"
                matTooltip="Specifies which Markdown header levels (e.g., H1, H2, H3) should be used to divide the document into chunks."
                matTooltipPosition="above"
                matTooltipClass="dialog__label-tooltip"
            >
                help_outline
            </mat-icon>
        </div>
        <div class="config__grid-item">
            <app-chips-input
                [chips]="headerItems"
            />
        </div>
        <div class="config__grid-item">
            <label>Return Each Line</label>
            <mat-icon
                class="config__tooltip"
                matTooltip="Treats each line of the Markdown file as a separate chunk. Useful for structured or list-based content."
                matTooltipPosition="above"
                matTooltipClass="dialog__label-tooltip"
            >
                help_outline
            </mat-icon>
        </div>
        <div class="config__grid-item">
            <app-toggle-switch
                formControlName="return_each_line"
            ></app-toggle-switch>
        </div>
        <div class="config__grid-item">
            <label>Strip Headers</label>
            <mat-icon
                class="config__tooltip"
                matTooltip="Removes Markdown header syntax (e.g., #, ##) from the chunk content while preserving the text."
                matTooltipPosition="above"
                matTooltipClass="dialog__label-tooltip"
            >
                help_outline
            </mat-icon>
        </div>
        <div class="config__grid-item">
            <app-toggle-switch
                formControlName="strip_headers"
            ></app-toggle-switch>
        </div>
    </div>
</form>

<div class="main-container">
  <div class="header-container">
    <p class="header">Create Task</p>
  </div>
  <div class="content">
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
      <!-- Name Field -->
      <mat-form-field
        appearance="outline"
        floatLabel="always"
        class="full-width"
      >
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" />
        <mat-error *ngIf="taskForm.get('name')?.hasError('required')">
          Name is required
        </mat-error>
      </mat-form-field>

      <!-- Instructions Field -->
      <mat-form-field
        appearance="outline"
        floatLabel="always"
        class="full-width"
      >
        <mat-label>Instructions</mat-label>
        <textarea matInput formControlName="instructions" rows="5"></textarea>
        <mat-error *ngIf="taskForm.get('instructions')?.hasError('required')">
          Instructions are required
        </mat-error>
      </mat-form-field>

      <!-- Expected Output Field -->
      <mat-form-field
        appearance="outline"
        floatLabel="always"
        class="full-width"
      >
        <mat-label>Expected Output</mat-label>
        <textarea
          matInput
          formControlName="expected_output"
          rows="3"
        ></textarea>
        <mat-error
          *ngIf="taskForm.get('expected_output')?.hasError('required')"
        >
          Expected Output is required
        </mat-error>
      </mat-form-field>

      <!-- Order Field -->
      <mat-form-field
        appearance="outline"
        floatLabel="always"
        class="full-width"
      >
        <mat-label>Order(optional)</mat-label>
        <input matInput type="number" formControlName="order" />
        <mat-error *ngIf="taskForm.get('order')?.hasError('required')">
          Order is required
        </mat-error>
      </mat-form-field>

      <!-- Agent Selection Field -->
      <mat-form-field
        appearance="outline"
        floatLabel="always"
        class="full-width"
      >
        <mat-label>Select Agent(optional)</mat-label>
        <mat-select formControlName="agent">
          <mat-option [value]="null">None</mat-option>
          <mat-option *ngFor="let agent of agents" [value]="agent">
            {{ agent.role }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </form>
  </div>

  <!-- Submit Button -->
  <div class="bottom">
    <button mat-stroked-button (click)="onCancel()" class="close">Close</button>
    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      type="submit"
    >
      Create
    </button>
  </div>
</div>

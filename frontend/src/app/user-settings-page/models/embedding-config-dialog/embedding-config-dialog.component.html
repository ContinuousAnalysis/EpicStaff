<div class="dialog-header">
  <h2>
    {{ isEditMode ? "Edit" : "Add" }} Configuration for {{ data.modelName }}
  </h2>
</div>

<div class="form-container">
  <form [formGroup]="configForm">
    <!-- Custom Name -->
    <div class="form-field">
      <label for="custom_name">Custom Name</label>
      <input
        id="custom_name"
        formControlName="custom_name"
        type="text"
        placeholder="Enter custom name"
      />
      <div
        *ngIf="
          customNameControl?.invalid &&
          (customNameControl?.dirty || customNameControl?.touched)
        "
        class="error"
      >
        <div *ngIf="customNameControl?.errors?.['required']">
          Custom Name is required.
        </div>
      </div>
    </div>
    <!-- Task Type -->
    <div class="form-field">
      <label for="task_type">Task Type</label>
      <select id="task_type" formControlName="task_type">
        <option value="retrieval_document">Retrieval Document</option>
      </select>
      <div
        *ngIf="
          taskTypeControl?.invalid &&
          (taskTypeControl?.dirty || taskTypeControl?.touched)
        "
        class="error"
      >
        <div *ngIf="taskTypeControl?.errors?.['required']">
          Task Type is required.
        </div>
      </div>
    </div>

    <!-- API Key Field with visibility toggle -->
    <div class="form-field with-toggle">
      <label for="api_key">API Key</label>
      <div class="input-wrapper">
        <input
          id="api_key"
          [type]="showApiKey ? 'text' : 'password'"
          formControlName="api_key"
          placeholder="Enter API Key"
        />
        <button
          type="button"
          class="toggle-visibility"
          (click)="toggleApiKeyVisibility()"
          [attr.aria-label]="showApiKey ? 'Hide API Key' : 'Show API Key'"
        >
          <mat-icon>{{
            showApiKey ? "visibility_off" : "visibility"
          }}</mat-icon>
        </button>
      </div>
      <div
        class="error"
        *ngIf="apiKeyControl?.touched && apiKeyControl?.invalid"
      >
        <div *ngIf="apiKeyControl?.errors?.['required']">
          API Key is required.
        </div>
      </div>
    </div>

    <!-- Visibility -->
    <div class="form-field">
      <label>
        <input type="checkbox" formControlName="is_visible" />
        Activated
      </label>
    </div>
  </form>
</div>

<div class="dialog-actions">
  <button (click)="onCancel()">Cancel</button>
  <button (click)="onSave()" [disabled]="configForm.invalid">
    {{ isEditMode ? "Update" : "Create" }}
  </button>
</div>

<!-- Header Section -->
<div class="models-header">
  <div>
    <h2 class="models-title">Models</h2>
    <p class="models-description">
      Browse and manage your available models below.
    </p>
  </div>

  <!-- Search Input -->
  <div class="search-checkbox-wrapper">
    <div class="search-input-wrapper">
      <mat-icon class="search-icon">search</mat-icon>
      <input type="text" placeholder="Search models..." class="search-input" />
    </div>

    <label class="filter-checkbox">
      <input type="checkbox" />
      Show Only Activated Models
    </label>
  </div>
</div>

<ng-container *ngFor="let providerGroup of providersWithModels">
  <div class="provider-section">
    <!-- Provider Header -->
    <div class="provider-header">
      <div class="provider-title">{{ providerGroup.provider.name }}</div>
    </div>
    <hr class="provider-divider" />

    <!-- Flex Container for Side-by-Side Layout -->
    <div class="models-flex-container">
      <!-- Model Templates Section -->
      <div class="models-column">
        <div class="section-header">
          <div class="section-title">Model Templates:</div>
        </div>

        <!-- Models List -->
        <!-- Models List -->
        <ul class="models-list">
          <li *ngFor="let model of providerGroup.models" class="model-item">
            <div class="model-item-content">
              <div class="model-name">
                {{ model.name }}
              </div>

              <div class="model-actions">
                <div class="model-type-label" *ngIf="model.isEmbedding">
                  Embedding
                </div>
                <div
                  class="configure-link"
                  (click)="openModelDetails(model, providerGroup.provider.name)"
                >
                  Use as template
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>

      <!-- Setuped Models Section -->

      <div class="models-column">
        <div class="section-header">
          <div class="section-title">Setuped Models:</div>
        </div>

        <div class="setuped-models-container">
          <ng-container
            *ngIf="providerGroup.setupedModels.length > 0; else noSetupedModels"
          >
            <ul class="models-list">
              <li
                *ngFor="let model of providerGroup.setupedModels"
                class="model-item"
              >
                <div class="model-item-content">
                  <div class="model-name">
                    <div>
                      {{ model.customName || model.name }}
                      <span class="original-model-name">
                        ({{ model.name }})
                      </span>
                      <span
                        class="activation-status-text"
                        [ngClass]="{
                          'activated-text': model.activated,
                          'deactivated-text': !model.activated
                        }"
                      >
                        - {{ model.activated ? "Activated" : "Deactivated" }}
                      </span>
                    </div>
                  </div>

                  <!-- Model Horizontal for Embedding Label and Configure Button -->
                  <div
                    class="model-horizontal"
                    [ngClass]="{ 'center-configure': !model.isEmbedding }"
                  >
                    <div class="model-type-label" *ngIf="model.isEmbedding">
                      Embedding
                    </div>
                    <div
                      class="configure-link"
                      (click)="
                        configureModel(model, providerGroup.provider.name)
                      "
                    >
                      Configure
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </ng-container>

          <!-- Fallback Message -->
          <ng-template #noSetupedModels>
            <div class="no-setuped-models">
              <div>
                No setuped models available. Use a template to set up a model.
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</ng-container>

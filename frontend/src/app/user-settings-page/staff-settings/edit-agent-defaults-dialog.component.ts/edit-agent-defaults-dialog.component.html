<div class="modal-content">
  <div class="modal-header">
    <div class="modal-title">Edit Agent Defaults</div>
    <button class="close-button" (click)="onCancel()" aria-label="Close Dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="agentDefaultsForm" class="modal-body">
    <!-- Allow Delegation -->
    <div class="form-group">
      <label for="allow_delegation">Allow Delegation</label>
      <select
        id="allow_delegation"
        class="input-field"
        formControlName="allow_delegation"
      >
        <option [value]="true">True</option>
        <option [value]="false">False</option>
      </select>
    </div>

    <!-- Memory Setting -->
    <div class="form-group">
      <label for="memory">Memory Setting</label>
      <select id="memory" class="input-field" formControlName="memory">
        <option [value]="true">True</option>
        <option [value]="false">False</option>
      </select>
    </div>

    <!-- Max Iterations -->
    <div class="form-group">
      <label for="max_iter">Max Iterations</label>
      <input
        id="max_iter"
        class="input-field"
        type="number"
        min="1"
        formControlName="max_iter"
      />
      <div
        class="error-message"
        *ngIf="agentDefaultsForm.get('max_iter')?.errors"
      >
        <span *ngIf="agentDefaultsForm.get('max_iter')?.hasError('required')">
          Max Iterations is required
        </span>
        <span *ngIf="agentDefaultsForm.get('max_iter')?.hasError('min')">
          Minimum value is 1
        </span>
      </div>
    </div>

    <!-- Default LLM Configuration -->
    <div class="form-group">
      <label for="llm_config_id">Default LLM Configuration</label>
      <select
        id="llm_config_id"
        class="input-field"
        formControlName="llm_config_id"
      >
        <option value="">None</option>
        <option *ngFor="let config of llmConfigs" [value]="config.id">
          {{ config.custom_name }}
        </option>
      </select>
    </div>

    <!-- Default Function LLM Configuration -->
    <div class="form-group">
      <label for="fcm_llm_config_id">Default Function LLM Configuration</label>
      <select
        id="fcm_llm_config_id"
        class="input-field"
        formControlName="fcm_llm_config_id"
      >
        <option value="">None</option>
        <option *ngFor="let config of llmConfigs" [value]="config.id">
          {{ config.custom_name }}
        </option>
      </select>
    </div>
  </form>

  <div class="modal-footer">
    <button class="button-close" (click)="onCancel()">Cancel</button>
    <button
      class="button-create"
      (click)="onSave()"
      [disabled]="agentDefaultsForm.invalid"
    >
      Save
    </button>
  </div>
</div>

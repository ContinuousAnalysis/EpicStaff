<div class="setup-page">
  <div class="setup-card" *ngIf="step === 'form'">
    <h1>Initial Setup</h1>
    <p>Create the first admin user to get started.</p>

    <form [formGroup]="form" (ngSubmit)="submit()">
      <label>
        Username
        <input type="text" formControlName="username" autocomplete="username" />
      </label>

      <label>
        Password
        <input type="password" formControlName="password" autocomplete="new-password" />
      </label>

      <label>
        Email (optional)
        <input type="email" formControlName="email" autocomplete="email" />
      </label>

      <button type="submit" [disabled]="form.invalid || loading">
        {{ loading ? 'Creating...' : 'Create Admin User' }}
      </button>

      <p class="error" *ngIf="error">{{ error }}</p>
      <p class="error" *ngIf="submitted && form.invalid">
        Please fill in username and a password with at least 8 characters.
      </p>
    </form>
  </div>

  <div class="setup-card" *ngIf="step === 'done'">
    <h1>Setup Complete</h1>
    <p>Copy your API key now. You will not see it again.</p>

    <div class="api-key-box">{{ apiKey }}</div>
    <div class="actions">
      <button (click)="copyApiKey()">Copy API Key</button>
      <button class="secondary" (click)="continue()">Continue</button>
    </div>
  </div>
</div>

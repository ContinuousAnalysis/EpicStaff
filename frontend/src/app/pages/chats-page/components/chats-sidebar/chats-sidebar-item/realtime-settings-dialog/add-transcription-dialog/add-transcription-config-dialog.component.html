<div class="dialog-container">
  <div class="dialog-header">
    <h2 class="dialog-title">Create Transcription Configuration</h2>
    <button class="close-button" (click)="onCancel()">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
        <line
          x1="18"
          y1="6"
          x2="6"
          y2="18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
        <line
          x1="6"
          y1="6"
          x2="18"
          y2="18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>
  </div>

  <div class="dialog-content">
    <form [formGroup]="transcriptionForm">
      <div class="form-group">
        <label for="model">Transcription Model</label>
        <div class="custom-select">
          <select
            id="model"
            formControlName="realtime_transcription_model"
            class="select-input"
          >
            <option value="" disabled>Select a model</option>
            <option *ngFor="let model of models" [value]="model.id">
              {{ model.name }}
            </option>
          </select>
          <div class="select-arrow">
            <svg
              width="10"
              height="6"
              viewBox="0 0 10 6"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1 1L5 5L9 1"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="customName">Custom Name</label>
        <input
          type="text"
          id="customName"
          formControlName="custom_name"
          placeholder="Enter a custom name"
          class="text-input"
        />
      </div>

      <div class="form-group">
        <label for="apiKey">API Key</label>
        <div class="input-with-icon">
          <input
            [type]="showApiKey ? 'text' : 'password'"
            id="apiKey"
            formControlName="api_key"
            placeholder="Enter API key"
            class="text-input"
          />
          <button
            type="button"
            class="eye-button"
            (click)="toggleApiKeyVisibility()"
          >
            <svg
              *ngIf="showApiKey"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2 12C2 12 5 5 12 5C19 5 22 12 22 12C22 12 19 19 12 19C5 19 2 12 2 12Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M3 3L21 21"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <svg
              *ngIf="!showApiKey"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2 12C2 12 5 5 12 5C19 5 22 12 22 12C22 12 19 19 12 19C5 19 2 12 2 12Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="dialog-footer">
    <button class="button secondary" (click)="onCancel()">Cancel</button>
    <button
      class="button primary"
      [disabled]="transcriptionForm.invalid || submitting"
      (click)="onConfirm()"
    >
      {{ submitting ? "Creating..." : "Create" }}
    </button>
  </div>
</div>
